{% load rental_extras %}
<script>
// –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë"
const oldLoadMoreRow = document.getElementById('load-more-row');
if (oldLoadMoreRow) {
    oldLoadMoreRow.remove();
}
</script>
{% for expense in investments_recent %}
<tr>
    <td style="text-align: center; font-size: 20px;">
        {% if expense.payment_type == 'purchase' %}
            üí∏
        {% elif expense.payment_type == 'deposit' %}
            üíµ
        {% endif %}
    </td>
    <td>{{ expense.date|date:"d.m.Y" }}</td>
    <td>{{ expense.paid_by_partner.user.username }}</td>
    <td>
        {% if expense.payment_type == 'purchase' %}
            {{ expense.category.name|default:"‚Äî" }}
        {% elif expense.payment_type == 'deposit' %}
            –í–Ω–µ—Å–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
        {% endif %}
    </td>
    <td class="amount">{{ expense.amount|floatformat:0 }} PLN</td>
    <td>{{ expense.description|default:"‚Äî" }}</td>
</tr>
{% endfor %}
{% if has_more %}
<tr id="load-more-row">
    <td colspan="6" style="text-align: center; padding: 20px;">
        <button 
            class="btn-primary btn-small" 
            hx-get="{% url 'load-investments' %}?offset={{ offset }}"
            hx-target="#investments-tbody"
            hx-swap="beforeend"
            hx-indicator="#loading-spinner-{{ offset }}"
        >
            –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë 10
        </button>
        <span id="loading-spinner-{{ offset }}" class="htmx-indicator" style="margin-left: 10px;">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</span>
    </td>
</tr>
{% endif %}
