{% extends "admin/change_list.html" %}
{% load static %}

{% block extrahead %}
  {{ block.super }}
  <style>
    .badge-balance { font-size: 0.9rem; }
  </style>
{% endblock %}

{% block object-tools-items %}
  {% with cur=request.GET.active %}
  <li>
    <button type="button"
            class="button btn btn-sm {% if cur == '1' %}btn-primary{% else %}btn-outline-primary{% endif %}"
            hx-get="?active=1"
            hx-target="#client-results"
            hx-push-url="true"
            hx-indicator="#client-results-loading">
      С активным
    </button>
  </li>
  <li>
    <button type="button"
            class="button btn btn-sm {% if cur == '0' %}btn-primary{% else %}btn-outline-primary{% endif %}"
            hx-get="?active=0"
            hx-target="#client-results"
            hx-push-url="true"
            hx-indicator="#client-results-loading">
      Без активного
    </button>
  </li>
  <li>
    <button type="button"
            class="button btn btn-sm {% if cur != '0' and cur != '1' %}btn-secondary{% else %}btn-outline-secondary{% endif %}"
            hx-get="."
            hx-target="#client-results"
            hx-push-url="true"
            hx-indicator="#client-results-loading">
      Все
    </button>
  </li>
  {% endwith %}
  {{ block.super }}
{% endblock %}

{% block result_list %}
  <style>
    .htmx-indicator { display: none; }
    .htmx-request .htmx-indicator { display: inline-block; }
  </style>
  <div id="client-results" hx-ext="morphdom-swap">
    <div id="client-results-loading" class="htmx-indicator">Загрузка…</div>
    {{ block.super }}
  </div>
{% endblock %}
