# üìä –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–§–∏–Ω–∞–Ω—Å—ã" - batteryRental-3

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-10-02  
**–í–µ—Ç–∫–∞:** `feature/finances-improvements`

---

## üéØ –¶–µ–ª—å –∞–Ω–∞–ª–∏–∑–∞

–ù–∞–≤–µ—Å—Ç–∏ –ø–æ—Ä—è–¥–æ–∫ –≤ —Ä–∞–∑–¥–µ–ª–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ:
- **–ö—Ç–æ** –∏ **–∫–æ–º—É** —Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç
- **–ö—Ç–æ** –∏ **—Å–∫–æ–ª—å–∫–æ** **–∫–æ–º—É** –¥–æ–ª–∂–µ–Ω
- –£—á–µ—Å—Ç—å, —á—Ç–æ —Ä–∞—Å—á—ë—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç **–Ω–µ –≤—Å–µ–≥–¥–∞ –≤–æ–≤—Ä–µ–º—è**

---

## üìã –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

1. **FinancePartner** - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä—ã
   - `role`: OWNER (–≤–ª–∞–¥–µ–ª–µ—Ü) –∏–ª–∏ MODERATOR (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä)
   - `share_percent`: –¥–æ–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ –ø—Ä–∏–±—ã–ª–∏ (%)
   - `active`: –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä

2. **MoneyTransfer** - –î–µ–Ω–µ–∂–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
   - `from_partner` ‚Üí `to_partner`: –∫—Ç–æ –∫–æ–º—É
   - `amount`: —Å—É–º–º–∞
   - `purpose`: 
     - `MODERATOR_TO_OWNER` - –º–æ–¥–µ—Ä–∞—Ç–æ—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏
     - `OWNER_TO_OWNER` - —Ä–µ–±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏
     - `OTHER` - –ø—Ä–æ—á–µ–µ
   - `use_collected`: —Å–ø–∏—Å—ã–≤–∞—Ç—å –ª–∏ –∏–∑ "—Å–æ–±—Ä–∞–Ω–Ω—ã—Ö" —Å—Ä–µ–¥—Å—Ç–≤
   - `date`: –¥–∞—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–∞

3. **Expense** - –†–∞—Å—Ö–æ–¥—ã –±–∏–∑–Ω–µ—Å–∞
   - `amount`: —Å—É–º–º–∞
   - `payment_type`: 
     - `PURCHASE` - –∑–∞–∫—É–ø–∫–∞ (50% –∏–¥—ë—Ç –≤ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞)
     - `DEPOSIT` - –≤–Ω–µ—Å–µ–Ω–∏–µ –¥–µ–Ω–µ–≥ (100% –≤ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏)
   - `paid_by_partner`: –∫—Ç–æ –æ–ø–ª–∞—Ç–∏–ª –∏–∑ —Å–≤–æ–∏—Ö –¥–µ–Ω–µ–≥

4. **OwnerContribution** - –í–∑–Ω–æ—Å—ã –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ)

5. **OwnerWithdrawal** - –í—ã–ø–ª–∞—Ç—ã –≤–ª–∞–¥–µ–ª—å—Ü–∞–º (–≤—ã–≤–æ–¥ –ø—Ä–∏–±—ã–ª–∏)
   - `partner`: –∫–æ–º—É
   - `amount`: —Å—É–º–º–∞
   - `reclassified_to_investment`: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤–æ –≤–∫–ª–∞–¥

6. **FinanceAdjustment** - –†—É—á–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏
   - `target`: COLLECTED / OWNER_SETTLEMENT / INVESTED
   - `amount`: —Å—É–º–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏

---

## üìä –†–∞–∑–¥–µ–ª—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### 1. **–î–æ–ª–≥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º** (–∑–∞ –ø–µ—Ä–∏–æ–¥)
**–§–æ—Ä–º—É–ª–∞:** `–°–æ–±—Ä–∞–Ω–æ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º - –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞–º`

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–¥–µ–ª **–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è** –¥–≤–∞–∂–¥—ã –≤ —à–∞–±–ª–æ–Ω–µ!
- –°—Ç—Ä–æ–∫–∏ 95-123
- –°—Ç—Ä–æ–∫–∏ 188-214 (—Ç–æ—á–Ω–∞—è –∫–æ–ø–∏—è)

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö—Ç–æ –∏–∑ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –¥–µ–Ω—å–≥–∏
- –°—É–º–º—É –¥–æ–ª–≥–∞
- –ö–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥"

---

### 2. **–°–æ–±—Ä–∞–Ω–Ω—ã–µ (Collected)**
**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ –Ω–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞
- –î–µ–ª—å—Ç–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥ (—Å–æ–±—Ä–∞–Ω–æ - –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ)
- –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ –∫–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞

**–õ–æ–≥–∏–∫–∞:**
```
Collected = Payments (RENT + SOLD) + Incoming transfers (use_collected) - Outgoing transfers (use_collected)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —á—ë—Ç–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∫—Ç–æ –∫–æ–º—É –¥–æ–ª–∂–µ–Ω –∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö

---

### 3. **–í–ª–æ–∂–µ–Ω–æ –≤ –±–∏–∑–Ω–µ—Å (Invested)**
**–§–æ—Ä–º—É–ª–∞ (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞):**
```
Balance = (Purchases √ó 50%) + Deposits - (Total Purchases / N_owners)
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –ö—Ç–æ —Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ –∑–∞–∫—É–ø–∫–∏ (50% –∏–¥—ë—Ç –≤ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏)
- –ö—Ç–æ —Å–∫–æ–ª—å–∫–æ –≤–Ω—ë—Å –¥–µ–Ω–µ–≥ (100% –≤ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏)
- "–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è" –¥–æ–ª—è = –æ–±—â–∏–µ –∑–∞–∫—É–ø–∫–∏ / –∫–æ–ª-–≤–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- –ë–∞–ª–∞–Ω—Å = –≤–ª–æ–∂–∏–ª - —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è –¥–æ–ª—è

**–ü—Ä–∏–º–µ—Ä:**
- –í–ª–∞–¥–µ–ª–µ—Ü A –∫—É–ø–∏–ª –±–∞—Ç–∞—Ä–µ–π –Ω–∞ 10000 PLN ‚Üí –≤–ª–æ–∂–∏–ª 5000
- –í–ª–∞–¥–µ–ª–µ—Ü B –∫—É–ø–∏–ª –±–∞—Ç–∞—Ä–µ–π –Ω–∞ 6000 PLN ‚Üí –≤–ª–æ–∂–∏–ª 3000
- –í—Å–µ–≥–æ –∑–∞–∫—É–ø–æ–∫: 16000 PLN
- –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è –¥–æ–ª—è –∫–∞–∂–¥–æ–≥–æ: 8000 PLN
- –ë–∞–ª–∞–Ω—Å A: 5000 - 8000 = **-3000 PLN** (–¥–æ–ª–∂–µ–Ω –¥–æ–ø–ª–∞—Ç–∏—Ç—å)
- –ë–∞–ª–∞–Ω—Å B: 3000 - 8000 = **-5000 PLN** (–¥–æ–ª–∂–µ–Ω –¥–æ–ø–ª–∞—Ç–∏—Ç—å)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å = –¥–æ–ª–∂–µ–Ω –¥–æ–ø–ª–∞—Ç–∏—Ç—å, –Ω–æ –Ω–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ "—Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥"

---

### 4. **–í–∑–∞–∏–º–æ—Ä–∞—Å—á—ë—Ç—ã –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ (Settlements)**
**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:** –ü–µ—Ä–µ–≤–æ–¥—ã `OWNER_TO_OWNER` —Å `use_collected=False` –∑–∞ –ø–µ—Ä–∏–æ–¥

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—Å–æ–∫ —É–∂–µ —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤, –∞ –Ω–µ —Ç–æ, —á—Ç–æ –ù–£–ñ–ù–û –ø–µ—Ä–µ–≤–µ—Å—Ç–∏

---

### 5. **–†–µ–±–∞–ª–∞–Ω—Å —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö (–∑–∞ –ø–µ—Ä–∏–æ–¥)**
**–¶–µ–ª—å:** –î–æ–≤–µ—Å—Ç–∏ –¥–æ–ª–∏ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –≤ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–µ–Ω—å–≥–∞—Ö –¥–æ –∏—Ö –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ (–æ–±—ã—á–Ω–æ 50/50)

**–§–æ—Ä–º—É–ª–∞ (–¥–ª—è 2 –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤):**
```
T = (Collected_A - Collected_B) / 2
```
–ï—Å–ª–∏ T > 0, —Ç–æ A ‚Üí B –Ω–∞ —Å—É–º–º—É T

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ –ø–µ—Ä–µ–≤–æ–¥—É
- –ö–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥"

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è **—Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞**, –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–æ–ª–≥–∏

---

### 6. **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏**
**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- –î–æ—Ö–æ–¥ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –†–∞—Å—Ö–æ–¥—ã –∫–æ–º–ø–∞–Ω–∏–∏ (—Å–µ–π—á–∞—Å = 0)
- –ü—Ä–∏–±—ã–ª—å = –î–æ—Ö–æ–¥ - –†–∞—Å—Ö–æ–¥—ã
- –°–∫–æ–ª—å–∫–æ –∫–∞–∂–¥–æ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è (–ø–æ –¥–æ–ª–µ %)
- –°–∫–æ–ª—å–∫–æ —É–∂–µ –≤—ã–¥–∞–Ω–æ (withdrawals)
- –°–∫–æ–ª—å–∫–æ –∫–æ–º–ø–∞–Ω–∏—è –µ—â—ë –¥–æ–ª–∂–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –∞—Ä–µ–Ω–¥—É –æ—Ñ–∏—Å–∞, –∑–∞—Ä–ø–ª–∞—Ç—ã –∏ —Ç.–¥.

---

## üî¥ –ì–ª–∞–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ "–¢–µ–∫—É—â–∏–µ –¥–æ–ª–≥–∏"**
‚ùå –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ 6 —Ä–∞–∑–¥–µ–ª–∞–º  
‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–π –¥–æ–ª–≥ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ  
‚ùå –ù–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –¥–æ–ª–≥–æ–≤ (—Ç–æ–ª—å–∫–æ –∑–∞ –ø–µ—Ä–∏–æ–¥)

### 2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
‚ùå –†–∞–∑–¥–µ–ª "–î–æ–ª–≥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤" –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã  
‚ùå –ú–Ω–æ–≥–æ –ø–æ—Ö–æ–∂–∏—Ö —Ç–∞–±–ª–∏—Ü —Å —Ä–∞–∑–Ω–æ–π –ª–æ–≥–∏–∫–æ–π

### 3. **–¢–æ–ª—å–∫–æ –ø–µ—Ä–∏–æ–¥—ã, –Ω–µ—Ç "All-Time"**
‚ùå –ï—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω –Ω–∞ –º–µ—Å—è—Ü, –¥–æ–ª–≥ "–∏—Å—á–µ–∑–∞–µ—Ç" –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞  
‚ùå –ù—É–∂–µ–Ω —Ä–µ–∂–∏–º "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–æ–ª–≥–∏ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è"

### 4. **–ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –¥–æ–ª–≥–æ–≤**
‚ùå –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥, –Ω–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∑–∞–∫—Ä—ã–ª –ª–∏ –æ–Ω –¥–æ–ª–≥ –ø–æ–ª–Ω–æ—Å—Ç—å—é  
‚ùå –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏: "–î–æ–ª–≥ –±—ã–ª 1000, –ø–µ—Ä–µ–≤–µ–ª–∏ 500, –æ—Å—Ç–∞–ª–æ—Å—å 500"

### 5. **–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –±–∞–ª–∞–Ω—Å –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω**
‚ùå –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å –≤–ª–æ–∂–µ–Ω–∏–π (–∫—Ç–æ –∫–æ–º—É –¥–æ–ª–∂–µ–Ω –∑–∞ –∑–∞–∫—É–ø–∫–∏)  
‚ùå –ù–æ –Ω–µ—Ç –∫–Ω–æ–ø–∫–∏ "–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥" –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è  
‚ùå –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å transfer —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ

### 6. **–ù–µ—É–¥–æ–±–Ω—ã–π UI**
‚ùå –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Å —Ä—É—á–Ω—ã–º –≤–≤–æ–¥–æ–º partner_id  
‚ùå –ú–æ–∂–Ω–æ –æ—à–∏–±–∏—Ç—å—Å—è –≤ —Å—É–º–º–µ  
‚ùå –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –±–æ–ª—å—à–µ, —á–µ–º –µ—Å—Ç—å)

### 7. **–ù–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –¥–æ–ª–≥–æ–≤**
‚ùå –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–µ—Ä–≤—ã–º:
1. –î–æ–ª–≥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤–ª–∞–¥–µ–ª—å—Ü–∞–º?
2. –†–µ–±–∞–ª–∞–Ω—Å —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏?
3. –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π?

### 8. **–ù–µ—è—Å–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è**
- "–°–æ–±—Ä–∞–Ω–Ω—ã–µ" vs "–í–ª–æ–∂–µ–Ω–æ" vs "–í–∑–∞–∏–º–æ—Ä–∞—Å—á—ë—Ç—ã" - –∑–∞–ø—É—Ç—ã–≤–∞–µ—Ç
- "use_collected" - –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –æ–±—ã—á–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ

1. ‚úÖ **–†–∞—Å—á—ë—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã** (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ñ–æ—Ä–º—É–ª—ã)
2. ‚úÖ **–ï—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤** (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –æ–ø–µ—Ä–∞—Ü–∏–π)
3. ‚úÖ **–ü–µ—Ä–∏–æ–¥—ã –≥–∏–±–∫–∏–µ** (–º–µ—Å—è—Ü / –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü / —Å –Ω–∞—á–∞–ª–∞ –≥–æ–¥–∞ / –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π)
4. ‚úÖ **AJAX-—Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤** (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
5. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** –ø–æ —Å—É–º–º–∞–º

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: **–ï–¥–∏–Ω—ã–π —Ä–∞–∑–¥–µ–ª "–¢–µ–∫—É—â–∏–µ –¥–æ–ª–≥–∏"**

–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ö—Ç–æ –¥–æ–ª–∂–µ–Ω | –ö–æ–º—É | –°—É–º–º–∞ | –¢–∏–ø –¥–æ–ª–≥–∞ | –ü–µ—Ä–∏–æ–¥ | –î–µ–π—Å—Ç–≤–∏–µ |
|-----------|------------|------|-------|-----------|--------|----------|
| üî¥ 1 | –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä1 | Admin | 500 PLN | –ó–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ | 01.09-30.09 | [–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥] |
| üü† 2 | Admin | –í–ª–∞–¥–µ–ª–µ—Ü2 | 300 PLN | –†–µ–±–∞–ª–∞–Ω—Å —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö | 01.09-30.09 | [–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥] |
| üü° 3 | –í–ª–∞–¥–µ–ª–µ—Ü1 | –í–ª–∞–¥–µ–ª–µ—Ü2 | 3000 PLN | –í–ª–æ–∂–µ–Ω–∏—è | –í—Å—ë –≤—Ä–µ–º—è | [–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥] |

**–õ–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:**
1. üî¥ **–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã ‚Üí –í–ª–∞–¥–µ–ª—å—Ü—ã** (–¥–æ–ª–≥ –∑–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏)
2. üü† **–†–µ–±–∞–ª–∞–Ω—Å —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö** –º–µ–∂–¥—É –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ (50/50)
3. üü° **–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π** (–∫—Ç–æ —Å–∫–æ–ª—å–∫–æ –≤–ª–æ–∂–∏–ª)

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: **–†–µ–∂–∏–º "–ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–æ–ª–≥–∏"**

–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å:
- üìÖ **–ó–∞ –ø–µ—Ä–∏–æ–¥** (—Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
- üìä **–ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ** (—Å –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ / —Å –¥–∞—Ç—ã X)

**–§–æ—Ä–º—É–ª–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –¥–æ–ª–≥–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞:**
```
Debt_total = SUM(Payments by moderator) - SUM(Transfers MODERATOR_TO_OWNER from moderator)
```

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤**

–í —Ä–∞–∑–¥–µ–ª–µ "–í–ª–æ–∂–µ–Ω–æ –≤ –±–∏–∑–Ω–µ—Å" –¥–æ–±–∞–≤–∏—Ç—å:
- –ö–Ω–æ–ø–∫—É **"–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥"** —Ä—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º –±–∞–ª–∞–Ω—Å–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç: –µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å < 0, –≤–ª–∞–¥–µ–ª–µ—Ü –¥–æ–ª–∂–µ–Ω –¥–æ–ø–ª–∞—Ç–∏—Ç—å –¥—Ä—É–≥–æ–º—É

**–ü—Ä–∏–º–µ—Ä:**
- –í–ª–∞–¥–µ–ª–µ—Ü A: –±–∞–ª–∞–Ω—Å -3000 PLN
- –í–ª–∞–¥–µ–ª–µ—Ü B: –±–∞–ª–∞–Ω—Å +3000 PLN
- –ö–Ω–æ–ø–∫–∞: **"A ‚Üí B: 3000 PLN"**

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: **–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ –ø–æ –¥–æ–ª–≥–∞–º**

–ü–æ–¥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–æ–π –¥–æ–ª–≥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
```
üìã –ò—Å—Ç–æ—Ä–∏—è:
  2025-09-15: –ü–µ—Ä–µ–≤–æ–¥ 300 PLN (–æ—Å—Ç–∞–ª–æ—Å—å 200)
  2025-09-22: –ü–µ—Ä–µ–≤–æ–¥ 100 PLN (–æ—Å—Ç–∞–ª–æ—Å—å 100)
  2025-09-30: –ü–µ—Ä–µ–≤–æ–¥ 100 PLN (–ó–ê–ö–†–´–¢–û)
```

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5: **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤**

–ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–µ—Ä–µ–≤–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —Å—Ä–µ–¥—Å—Ç–≤ –≤ "—Å–æ–±—Ä–∞–Ω–Ω—ã—Ö" (–µ—Å–ª–∏ `use_collected=True`)
- ‚úÖ –ù–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏ —Å—É–º–º–∞ —Ç–µ–∫—É—â–∏–π –¥–æ–ª–≥
- ‚úÖ –ù–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ª–∏ –ø–µ—Ä–µ–≤–æ–¥ "—Å–∞–º —Å–µ–±–µ"
- ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: "–í—ã —Å–æ–∑–¥–∞—ë—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –±–æ–ª—å—à–µ, —á–µ–º –¥–æ–ª–≥ (500 > 450)"

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 6: **–£–ª—É—á—à–µ–Ω–∏–µ UI**

1. **–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–µ–∫—Ü–∏–∏ "–î–æ–ª–≥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤"
2. **–ö–Ω–æ–ø–∫–∏ —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º** –≤–º–µ—Å—Ç–æ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω —Å —Ä—É—á–Ω—ã–º –≤–≤–æ–¥–æ–º
3. **–¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞**:
   - üî¥ –ö—Ä–∞—Å–Ω—ã–π = —Å—Ä–æ—á–Ω–æ (–¥–æ–ª–≥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞)
   - üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π = —Å—Ä–µ–¥–Ω–∏–π (—Ä–µ–±–∞–ª–∞–Ω—Å)
   - üü° –ñ—ë–ª—Ç—ã–π = –Ω–µ—Å—Ä–æ—á–Ω–æ (–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏)
4. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞**: "–î–æ–ª–≥ –∑–∞–∫—Ä—ã—Ç –Ω–∞ 60% (300 –∏–∑ 500)"

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 7: **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Ä–º–∏–Ω–æ–≤**

–î–æ–±–∞–≤–∏—Ç—å **–≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** (tooltips):
- **"–°–æ–±—Ä–∞–Ω–Ω—ã–µ"** = –¥–µ–Ω—å–≥–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ (–∞—Ä–µ–Ω–¥–∞, –ø—Ä–æ–¥–∞–∂–∏)
- **"–í–ª–æ–∂–µ–Ω–æ"** = –¥–µ–Ω—å–≥–∏, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã–µ –Ω–∞ –∑–∞–∫—É–ø–∫—É –±–∞—Ç–∞—Ä–µ–π
- **"use_collected"** = —Å–ø–∏—Å–∞—Ç—å –∏–∑ "—Å–æ–±—Ä–∞–Ω–Ω—ã—Ö" —Å—Ä–µ–¥—Å—Ç–≤ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

---

## üìê –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á—ë—Ç–∞ –¥–æ–ª–≥–æ–≤

### 1. –î–æ–ª–≥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞–º (–∑–∞ –ø–µ—Ä–∏–æ–¥)
```python
debt = SUM(payments by moderator in period) - SUM(transfers MODERATOR_TO_OWNER from moderator in period)
```

### 2. –†–µ–±–∞–ª–∞–Ω—Å —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ (2 –≤–ª–∞–¥–µ–ª—å—Ü–∞, 50/50)
```python
collected_A = payments_A + incoming_transfers_A - outgoing_transfers_A
collected_B = payments_B + incoming_transfers_B - outgoing_transfers_B
transfer = (collected_A - collected_B) / 2
# –ï—Å–ª–∏ > 0: A ‚Üí B, –∏–Ω–∞—á–µ B ‚Üí A
```

### 3. –ë–∞–ª–∞–Ω—Å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞)
```python
invested = (purchases √ó 50%) + deposits
fair_share = total_purchases / num_owners
balance = invested - fair_share
# –ï—Å–ª–∏ < 0: –≤–ª–∞–¥–µ–ª–µ—Ü –¥–æ–ª–∂–µ–Ω –¥–æ–ø–ª–∞—Ç–∏—Ç—å –¥—Ä—É–≥–∏–º
```

### 4. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏
```python
profit = income - expenses
due_to_owner = profit √ó owner_share_percent
withdrawn = SUM(withdrawals by owner)
company_owes = due_to_owner - withdrawn
```

---

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω ‚úÖ)
- [x] –ò–∑—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- [x] –ò–∑—É—á–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á—ë—Ç–æ–≤
- [x] –í—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- [x] –°–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –≠—Ç–∞–ø 2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â—É—é—Å—è —Å–µ–∫—Ü–∏—é "–î–æ–ª–≥ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤"
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–¢–µ–∫—É—â–∏–µ –¥–æ–ª–≥–∏" —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º "–ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –¥–æ–ª–≥–∏"

### –≠—Ç–∞–ø 3: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- [ ] –ö–Ω–æ–ø–∫–∏ "–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥" –¥–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤
- [ ] –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—É–º–º –∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–µ—Ä–µ–≤–æ–¥–∞

### –≠—Ç–∞–ø 4: UX —É–ª—É—á—à–µ–Ω–∏—è
- [ ] –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –¥–æ–ª–≥–æ–≤
- [ ] Tooltips –¥–ª—è —Ç–µ—Ä–º–∏–Ω–æ–≤
- [ ] –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ –ø–æ–¥ –∫–∞–∂–¥—ã–º –¥–æ–ª–≥–æ–º
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á—ë—Ç–æ–≤ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –¥–æ–ª–≥–æ–≤

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–∫—É—â–∏–π —Ä–∞–∑–¥–µ–ª **—Ä–∞–±–æ—Ç–∞–µ—Ç**, –Ω–æ **–Ω–µ—É–¥–æ–±–µ–Ω** –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- üî¥ –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–æ–≤
- üî¥ –ù–µ–ø–æ–Ω—è—Ç–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- üî¥ –ù–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –¥–æ–ª–≥–æ–≤
- üî¥ –ù–µ—É–¥–æ–±–Ω—ã–π UI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å **–µ–¥–∏–Ω—ã–π —Ä–∞–∑–¥–µ–ª "–¢–µ–∫—É—â–∏–µ –¥–æ–ª–≥–∏"**, –≥–¥–µ —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ:
1. –ö—Ç–æ –∫–æ–º—É –¥–æ–ª–∂–µ–Ω
2. –°–∫–æ–ª—å–∫–æ
3. –ù–∞—Å–∫–æ–ª—å–∫–æ —Å—Ä–æ—á–Ω–æ
4. –ö–∞–∫ –∑–∞–∫—Ä—ã—Ç—å (–æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞)

–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –∑–∞ **10 —Å–µ–∫—É–Ω–¥** –ø–æ–Ω—è—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é —Å–∏—Ç—É–∞—Ü–∏—é –∏ —Å–æ–∑–¥–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã.

---

**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** OpenHands AI  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —É–ª—É—á—à–µ–Ω–∏–π
