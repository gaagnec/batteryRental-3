# Логика работы переводов между партнёрами

## Две галочки в форме перевода:

### 1. "Списывать из собранных средств бизнеса" (use_collected)

**Назначение:** Определяет, влияет ли перевод на **личный баланс владельцев** в разделе "Баланс доходов владельцев".

**Логика:**
- ✅ **Галочка СТОИТ** (use_collected=True):
  - Деньги берутся из собранных средств бизнеса (из кассы)
  - Перевод **НЕ учитывается** в разделе "Баланс доходов владельцев"
  - Это "безналичная" операция между счетами бизнеса
  
- ❌ **Галочка НЕ СТОИТ** (use_collected=False):
  - Деньги идут из личных средств отправителя
  - Перевод **УЧИТЫВАЕТСЯ** в разделе "Баланс доходов владельцев"
  - Один владелец реально переводит деньги другому

**Пример:**
- Владелец А переводит 100 PLN владельцу Б
- Если галочка НЕ стоит → у А в балансе -100, у Б +100
- Если галочка стоит → баланс владельцев не меняется (это перераспределение средств бизнеса)

---

### 2. "Засчитать как взнос в бизнес" (add_to_deposits)

**Назначение:** Определяет, создавать ли запись DEPOSIT (взнос) для отправителя, что увеличит его вклад в бизнес.

**Логика:**
- ✅ **Галочка СТОИТ** (add_to_deposits=True):
  - Создаётся запись Expense с типом DEPOSIT
  - Увеличивается "Вложения в бизнес" у отправителя
  - Используется когда владелец через перевод вносит деньги в бизнес
  
- ❌ **Галочка НЕ СТОИТ** (add_to_deposits=False):
  - Запись DEPOSIT не создаётся
  - Это просто перевод денег, без увеличения вклада

**Пример:**
- Владелец А переводит 100 PLN владельцу Б
- Если галочка стоит → у А в разделе "Вложения в бизнес" добавится +100 к взносам
- Если галочка НЕ стоит → вклад А не изменится

---

## Типичные сценарии:

### Сценарий 1: Личный перевод между владельцами (долг/заём)
- use_collected = ❌ (НЕ стоит)
- add_to_deposits = ❌ (НЕ стоит)
- **Результат:** Изменяется баланс доходов, НЕ изменяются вложения

### Сценарий 2: Владелец вносит деньги через другого владельца
- use_collected = ❌ (НЕ стоит)
- add_to_deposits = ✅ (стоит)
- **Результат:** Изменяется баланс доходов, увеличиваются вложения отправителя

### Сценарий 3: Перераспределение средств бизнеса
- use_collected = ✅ (стоит)
- add_to_deposits = ❌ (НЕ стоит)
- **Результат:** НЕ изменяется баланс доходов, НЕ изменяются вложения

### Сценарий 4: Перевод от модератора владельцу (собранные деньги)
- use_collected = ✅ (стоит)
- add_to_deposits = ❌ (НЕ стоит)
- **Результат:** Уменьшается долг модератора перед владельцами

---

## Где это отражается:

**Раздел "Баланс доходов владельцев":**
- Учитываются только переводы с `use_collected=False`
- Показывает, кто кому должен из личных средств

**Раздел "Вложения в бизнес":**
- Учитываются расходы типа DEPOSIT
- Показывает, сколько каждый вложил в бизнес

**Раздел "Переводы":**
- Показывает ВСЕ переводы независимо от галочек
